<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
</head>

<body>

	<button type="button" onclick="test()">Send</button>
	<h1>json</h1>
	<div id="json">
	</div>
	<h1>response</h1>
	<div id="response">
	</div>

	<script>

		async function test() { // fonction asynchrone
			let json = JSON.stringify({
				article_type: "canard",
				categorie: "Canard",
				desc: "uih",
				dim: "55x55",
				disponibilite: 56,
				 fabrication: "liuh",
				 matiere: "lkb",
				 normes: "iuwshd",
				poids: 3.00,
				 prix: 12.00,
				isRecyclable: false,
				titre: "lulkh",
				 image: "https://m.media-amazon.com/images/I/717GP+JqcTL._AC_UY327_FMwebp_SL140_.jpg"
			});
			console.log(json);
			document.getElementById("json").innerHTML = json;
			let response = await fetch("http://127.0.0.1:8000/wp-json/wc/v3/products", {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json; charset=utf-8',
					'Accept': 'application/json'
				},
				body: json
			});
			console.log(response);
			if (response.status == 201) { // attendre la r√©solution d'une promesse
				if (response.headers.get("Content-Location")) {
					document.getElementById("response").innerHTML = await response.text();
				} else {
					document.getElementById("response").innerHTML = "Error, no \"Content-Location\" in response headers";
				}
			} else {
				document.getElementById("response").innerHTML = "Error code " + response.status;
			}
		}
	</script>

</body>

</html>