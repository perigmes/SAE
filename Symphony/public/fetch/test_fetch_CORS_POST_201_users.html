<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
</head>

<body>

	<button type="button" onclick="test()">Send</button>
	<h1>json</h1>
	<div id="json">
	</div>
	<h1>response</h1>
	<div id="response">
	</div>

	<script>
		async function test() { // fonction asynchrone
			let json = JSON.stringify({
				"pseudo": "Lulu",
				"email": "clulu@sjp.com",
				//"mdp": "kjegd",
				"pp": "data:image/jpeg;base64,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",
				"write": false,
				"read": false
			});
			console.log(json);
			document.getElementById("json").innerHTML = json;
			let response = await fetch("http://127.0.0.1:8000/wp-json/wc/v3/users", {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json; charset=utf-8',
					'Accept': 'application/json'
				},
				body: json
			});
			console.log(response);
			if (response.status == 201) { // attendre la r√©solution d'une promesse
				if (response.headers.get("Content-Location")) {
					document.getElementById("response").innerHTML = await response.text();
				} else {
					document.getElementById("response").innerHTML = "Error, no \"Content-Location\" in response headers";
				}
			} else {
				document.getElementById("response").innerHTML = "Error code " + response.status;
			}
		}
	</script>

</body>

</html>